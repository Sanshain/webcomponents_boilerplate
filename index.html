<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>        

    <script id='rrr' src="legacy__ce_sd__support/dyncmic__initialize.js"></script>   
    <style>@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {template{ display: none; }}</style>

</head>
<body">
        




    <slider-carousel class='slider'>--</slider-carousel>
    <span>123</span>        
    
    
    <template id='slider'>   
                      
        <style>
            /* :host { */
            .p{}
            :host{
                display: block;
                color: green;
            }            
        </style>               
        <span>sliding: </span><slot></slot>.     
        <div class="inside">456</div>
    </template>    
    
    <!-- <script id='webcomponents'>

        window.addEventListener('load', () => {                    

            class SliderComponent extends HTMLElement {
                constructor() {
                    super();
                                    
                    let dom = document.getElementById('slider').content.cloneNode(true);                    
                    // this.attachShadow({ mode: "open" }).appendChild(dom);   
                    this.attachShadow({ mode: "open" });                   
                    this.shadowRoot.appendChild(dom);
                }
            }

            customElements.define("slider-carousel", SliderComponent);            
        })
    </script> -->










    <script id='ie__components'>
        if (!Array.from){
            
            window.addEventListener('load', function(){                            

                var SliderComponent = document.getElementById('slider'); 

                customElements.define("slider-carousel", SliderComponent);

					 console.log('ie detected')
            })
        }
    </script>    

    <script>
        // global ie:
        customElements.initializeIE = function(elem){

            if (!Array.from){            
                window.addEventListener('load', function(){                            
                    var SliderComponent = document.getElementById(elem.id); 
                    customElements.define(elem.name, SliderComponent);
                })
            }            
        }
        // global all:
        customElements.initialize = function(elem){

				if (!Array.from) return;

				// текст надо брать из файла жс (получать через фетч с сервера, видимо)
				SliderComponent = eval(`					
					class SliderComponent extends HTMLElement {
						constructor() {
								super();                                    
								let dom = document.getElementById(elem.id).content.cloneNode(true);                                        
								this.attachShadow({ mode: "open" });                   
								this.shadowRoot.appendChild(dom);
						}
					}
					SliderComponent
				`)
            window.addEventListener('load', function(){    
				 
					customElements.define(elem.name, SliderComponent);
            });
       
        }

      	//   inside unit:
      //   customElements.initialize({
      //       id: 'slider',
      //       name: 'slider-carousel'	// 'slider_carousel'
      //   })

        // в перспективе для джанги сделать так через initialize. Но пока тренивароться так
    </script>

    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/1.0.22/webcomponents-sd-ce.js"></script> -->
</body>
</html>